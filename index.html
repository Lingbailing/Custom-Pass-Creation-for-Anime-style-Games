<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>通行认证自定义工具</title>
  <link rel="icon" href="assets/icon/" type="image/png">
  <link rel="stylesheet" href="css/main.css">
</head>
<body>
<div class="container1">
  <div class="left">
    <canvas id="canvas01" width="590" height="1180"></canvas>
    <canvas id="canvas02" width="590" height="1180"></canvas>
  </div>

  <div class="right">
    <h2>通行认证自定义工具  <span style="font-size:0.6em; opacity:0.5; font-weight:normal;">-测试版 V2.1（AI太傻了，调不动了）😫 -</span></h2>
    <span style="font-size:0.6em; opacity:0.5; font-weight:normal;">建议使用PC浏览器体验完整功能（请耐心使用，出BUG就多试试。我自己使用也会有BUG，但是重新进入就恢复正常了）</span>
    <div class="container2">
      <div class="">
        <h3>修改后或渲染出现BUG时请刷新</h3>
        <button id="shuaXin">⟳ 刷新</button>
        <button id="chongZhi">⚠ 重置</button>
        <h3>基本信息</h3>
        <label for="left_title">主标题</label>
        <input id="left_title" type="text" placeholder="例如：罗德岛">

        <label for="xz4">右小字 (Subtitle)</label>
        <input id="xz4" type="text">

        <label for="name1">角色名 (Operator)</label>
        <input id="name1" type="text">

        <label for="arknights1">编号 (Code)</label>
        <input id="arknights1" type="text">

        <label for="staff">STAFF</label>
        <input id="staff" type="text">

        <h3>详情配置</h3>
        <label for="xz1">下方小字 1</label>
        <input id="xz1" type="text">
        <label for="xz2">下方小字 2</label>
        <input id="xz2" type="text">
        <label for="xz3">下方小字 3</label>
        <input id="xz3" type="text">

        <label for="seProfession">选择职业</label>
        <select id="seProfession"></select>
        <label for="professionUpload" style="margin-top:8px; display:none;" id="professionUploadLabel">上传自定义职业图标</label>
        <input id="professionUpload" type="file" accept="image/*" style="display:none;">

        <label for="seFaction">选择阵营</label>
        <select id="seFaction"></select>
        <label for="factionUpload" style="margin-top:8px; display:none;" id="factionUploadLabel">上传自定义阵营图标</label>
        <input id="factionUpload" type="file" accept="image/*" style="display:none;">

        <label for="imageUpload" style="cursor: pointer; margin-top:20px;">
          <div style="background:var(--input-bg); border:1px dashed #666; padding:15px; text-align:center; border-radius:4px; color: var(--accent-color);">
            📂 点击上传角色图片
          </div>
        </label>
        <input id="imageUpload" type="file" accept="image/*" style="display:none;"
               onchange="this.previousElementSibling.querySelector('div').innerText = '已选择: ' + this.files[0].name">

        <label class="checkbox-container" style="display:flex; align-items:center; gap:10px; margin-top:16px;">
          <input id="advancedToggle" class="custom-checkbox" type="checkbox">
          <span class="checkmark"></span>
          <span>开启文本样式与位置（高级）</span>
        </label>

        <div id="advancedPanel" style="display:none;">
          <h3>文本样式与位置（高级）</h3>
          <label for="fieldSelect">选择文本字段</label>
          <select id="fieldSelect"></select>

        <label class="checkbox-container" style="display:flex; align-items:center; gap:10px; margin-top:8px;">
          <input id="mergeFrontBackToggle" class="custom-checkbox" type="checkbox">
          <span class="checkmark"></span>
          <span>合并正/背面选择（启用后同 id 字段同时编辑）</span>
        </label>

        <label for="fieldText">文本内容（实时编辑）</label>
        <input id="fieldText" type="text">

        <label for="posLeft">位置 - 左 (left)</label>
        <input id="posLeft" type="number" step="1">
        <label for="posTop">位置 - 顶 (top)</label>
        <input id="posTop" type="number" step="1">
        <label for="posRotate">旋转 (degrees)</label>
        <input id="posRotate" type="number" step="1">

        <label for="fontSelect">选择字体</label>
        <select id="fontSelect"></select>

        <label for="fontStyleSelect">字重 / 风格</label>
        <select id="fontStyleSelect"></select>

        <label for="fontSize">字号 (pt)</label>
        <input id="fontSize" type="number" step="0.1">

        <label for="fontColor">颜色</label>
        <input id="fontColor" type="color" value="#ffffff">

        <label for="fontTracking">字间距 (tracking)</label>
        <input id="fontTracking" type="number" step="1">

        <label for="fontUpload">上传自定义字体 (TTF / OTF)</label>
        <input id="fontUpload" type="file" accept=".ttf,.otf">
        <button id="applyStyle">应用样式</button>
        </div>




      </div>

      <div>
        <h3>背面信息</h3>
        <label for="xzb1">背面小字 1</label>
        <input id="xzb1" type="text">
        <label for="xzb2">背面小字 2</label>
        <input id="xzb2" type="text">
        <label for="xzb3">背面小字 3</label>
        <input id="xzb3" type="text">
        <label for="xzb4">左侧标识</label>
        <input id="xzb4" type="text">

        <h3>视觉样式</h3>
        <label>渐变色开关</label>
        <div class="cyber-toggle-wrapper">
          <input id="toggleJianBian" class="cyber-toggle-checkbox" type="checkbox" checked>
          <div class="cyber-toggle" aria-hidden="true">
            <div class="cyber-toggle-track">
              <div class="cyber-toggle-track-glow"></div>
              <div class="cyber-toggle-track-dots">
                <span class="cyber-toggle-track-dot"></span>
                <span class="cyber-toggle-track-dot"></span>
                <span class="cyber-toggle-track-dot"></span>
              </div>
              <div class="cyber-toggle-thumb">
                <div class="cyber-toggle-thumb-shadow"></div>
                <div class="cyber-toggle-thumb-highlight"></div>
                <div class="cyber-toggle-thumb-icon">
                  <svg viewBox="0 0 24 24" aria-hidden="true"><circle cx="12" cy="12" r="6"></circle></svg>
                </div>
              </div>
              <div class="cyber-toggle-particles">
                <span class="cyber-toggle-particle"></span>
                <span class="cyber-toggle-particle"></span>
                <span class="cyber-toggle-particle"></span>
                <span class="cyber-toggle-particle"></span>
              </div>
            </div>
          </div>
          <div class="cyber-toggle-labels">
            <span class="cyber-toggle-label-off">隐藏</span>
            <span class="cyber-toggle-label-on">显示</span>
          </div>
        </div>
        <label for="jian_bian">渐变色选择</label>
        <input id="jian_bian" type="color" value="#00bfff">

        <label>挡板开关</label>
        <div class="cyber-toggle-wrapper">
          <input id="toggleDangBan" class="cyber-toggle-checkbox" type="checkbox" checked>
          <div class="cyber-toggle" aria-hidden="true">
            <div class="cyber-toggle-track">
              <div class="cyber-toggle-track-glow"></div>
              <div class="cyber-toggle-track-dots">
                <span class="cyber-toggle-track-dot"></span>
                <span class="cyber-toggle-track-dot"></span>
                <span class="cyber-toggle-track-dot"></span>
              </div>
              <div class="cyber-toggle-thumb">
                <div class="cyber-toggle-thumb-shadow"></div>
                <div class="cyber-toggle-thumb-highlight"></div>
                <div class="cyber-toggle-thumb-icon">
                  <svg viewBox="0 0 24 24" aria-hidden="true"><circle cx="12" cy="12" r="6"></circle></svg>
                </div>
              </div>
              <div class="cyber-toggle-particles">
                <span class="cyber-toggle-particle"></span>
                <span class="cyber-toggle-particle"></span>
                <span class="cyber-toggle-particle"></span>
                <span class="cyber-toggle-particle"></span>
              </div>
            </div>
          </div>
          <div class="cyber-toggle-labels">
            <span class="cyber-toggle-label-off">隐藏</span>
            <span class="cyber-toggle-label-on">显示</span>
          </div>
        </div>
        <label for="dang_ban">精一挡板颜色</label>
        <input id="dang_ban" type="color" value="#8a60ab">

        <label for="bei_ying">角色背影颜色</label>
        <input id="bei_ying" type="color" value="#fff1b9">

        <label>Logo 开关</label>
        <div class="cyber-toggle-wrapper">
          <input id="toggleLogo" class="cyber-toggle-checkbox" type="checkbox" checked>
          <div class="cyber-toggle" aria-hidden="true">
            <div class="cyber-toggle-track">
              <div class="cyber-toggle-track-glow"></div>
              <div class="cyber-toggle-track-dots">
                <span class="cyber-toggle-track-dot"></span>
                <span class="cyber-toggle-track-dot"></span>
                <span class="cyber-toggle-track-dot"></span>
              </div>
              <div class="cyber-toggle-thumb">
                <div class="cyber-toggle-thumb-shadow"></div>
                <div class="cyber-toggle-thumb-highlight"></div>
                <div class="cyber-toggle-thumb-icon">
                  <svg viewBox="0 0 24 24" aria-hidden="true"><circle cx="12" cy="12" r="6"></circle></svg>
                </div>
              </div>
              <div class="cyber-toggle-particles">
                <span class="cyber-toggle-particle"></span>
                <span class="cyber-toggle-particle"></span>
                <span class="cyber-toggle-particle"></span>
                <span class="cyber-toggle-particle"></span>
              </div>
            </div>
          </div>
          <div class="cyber-toggle-labels">
            <span class="cyber-toggle-label-off">隐藏</span>
            <span class="cyber-toggle-label-on">显示</span>
          </div>
        </div>

        <label>切割线开关</label>
        <div class="cyber-toggle-wrapper">
          <input id="toggleCut" class="cyber-toggle-checkbox" type="checkbox" checked>
          <div class="cyber-toggle" aria-hidden="true">
            <div class="cyber-toggle-track">
              <div class="cyber-toggle-track-glow"></div>
              <div class="cyber-toggle-track-dots">
                <span class="cyber-toggle-track-dot"></span>
                <span class="cyber-toggle-track-dot"></span>
                <span class="cyber-toggle-track-dot"></span>
              </div>
              <div class="cyber-toggle-thumb">
                <div class="cyber-toggle-thumb-shadow"></div>
                <div class="cyber-toggle-thumb-highlight"></div>
                <div class="cyber-toggle-thumb-icon">
                  <svg viewBox="0 0 24 24" aria-hidden="true"><circle cx="12" cy="12" r="6"></circle></svg>
                </div>
              </div>
              <div class="cyber-toggle-particles">
                <span class="cyber-toggle-particle"></span>
                <span class="cyber-toggle-particle"></span>
                <span class="cyber-toggle-particle"></span>
                <span class="cyber-toggle-particle"></span>
              </div>
            </div>
          </div>
          <div class="cyber-toggle-labels">
            <span class="cyber-toggle-label-off">隐藏</span>
            <span class="cyber-toggle-label-on">显示</span>
          </div>
        </div>
        
        <h3>条形码（自定义）</h3>
        <label for="barcodeData">内容</label>
        <input id="barcodeData" type="text" placeholder="在此输入条形码内容" value="LingBailing">
        <div class="barcode-group">
          <label for="barcodeWidth">宽度（条形码像素宽度）</label>
          <input id="barcodeWidth" type="number" value="700">
          <label for="barcodeHeight">高度（条形码像素高度）</label>
          <input id="barcodeHeight" type="number" value="80">
          <div class="help-text">说明：位置固定，X=0，Y=700；宽度/高度为生成的条形码像素尺寸（非位置）。</div>
        </div>
        <label for="barcodeBarWidth">条宽 (px)</label>
        <input id="barcodeBarWidth" type="number" value="3.5" step="0.1">
        <label for="barcodeBarColor">条颜色</label>
        <input id="barcodeBarColor" type="color" value="#000000">
        <label style="display:flex;align-items:center;gap:8px;"><input id="barcodeTransparent" type="checkbox"> 透明条形码（使 frame 区域穿透）</label>
        <button id="createBarcode">生成条形码</button>
        <button id="removeBarcode">移除条形码</button>
        </div>

        <h3>导出</h3>
        <div class="export-group">
          <div class="export-row">
            <button id="exportPNG1">↓ 导出正面 .PNG</button>
            <button id="exportPNG2">↓ 导出背面 .PNG</button>
          </div>
          <div class="export-row">
            <button id="exportBothPNG">↓ 导出双面（并排）.PNG</button>
            <button id="exportBothZip">↓ 导出双面.zip</button>
          </div>
          <div class="export-row">
            <button id="exportShare">↓ 导出分享文件 (.json)</button>
            <label class="import-label">
              <input id="importShare" type="file" accept="application/json">
              <span>加载分享文件</span>
            </label>
          </div>
        </div>

        <button id="lianXi" style="margin-top:20px">✉ 联系作者</button>
        <button id="github" style="margin-top:20px">GitHub</button>
      </div>
    </div>
  </div>
</div>
<!-- JsBarcode for standard barcode generation -->
<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
<!-- JSZip for packaging exports (zip) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="main.js" type="module"></script>
</body>
</html>
